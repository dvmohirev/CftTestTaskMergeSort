# CftTestTaskMergeSort

<h2>Задача:</h2>
Написать программу сортировки слиянием нескольких файлов.

<h2>Описание:</h2>
<p>Использовалась версия Java 17.<p>
<p>Программа написана в среде разработки IntelliJ IDEA, выполнена в виде утилиты, для запуска из командной строки, где в аргументы 
пользователь передает:<p>
<p>1. режим сортировки (-a или -d), необязательный, по умолчанию сортируем по возрастанию;</p>
<p>2. тип данных (-s или -i), обязательный;</p>
<p>3. имя выходного файла, обязательное;</p>
<p>4. остальные параметры – имена входных файлов, не менее одного.</p> 
<p><h2>Решение:</h2>
<p>Исходя из параметров, которые переданы при запуске программы выполняется сортировка слиянием нескольких файлов по возрастанию или по убыванию. Читаем файлы ЦЕЛИКОМ, и заполняем Map<<String>(Файл), ArrayList<String>(Данные из файла)>, чтобы потом передать данные из файлов в метод сортировки.
Метод сортировки возвращает массив, который потом записывается в конечный файл.
В данном решении есть недоработка. Она заключается в том, что при больших файлах, которые не помещающимся целиком в оперативную
память, программа будет "падать". К сожалению, я испробовал различные пути решения этой проблемы, но в итоге я не решил проблему.</p>

<h2>Описание классов и их методов:</h2>
<h3>Main.java</h3>
<p>Исходя из параметров, переданных при запуске программы сохраняем параметры в глобальных переменных.</p>
<p>Создаем экземпляр класса SortMerge и передаем значения глобальных переменных.</p>
<p>Запускаем метод sortToFile класса SortMerge</p>
<h3>SortMerge.java</h3>
<p>В данном классе содержится восемь методов:</p>  
<p><b>sortToFile</b> - Вызываем метод readFileToList, которому передается в параметр название файла. Передаем название каждого файла, который передавался при запуске программы.
Метод readFileToList возвращает Map, в каждом элементе которого находится содержимое файлов, переданных при запуске программы.
В цикле вызываем метод sortMergeUpInt/sortMergeDownInt/sortMergeUpStr/sortMergeDownStr в зависимости от параметров при запуске программы, передаем ему в параметры пустой массив resultInt для целых чисел/для строк и содержимое одного из файлов в виде массива.
Метод sortMergeUpInt/sortMergeDownInt/sortMergeUpStr/sortMergeDownStr возвращает отсортированный массив и помещаем его в заранее созданный массив.
Вызываем метод resultToFileInt/resultToFileStr, в параметры которого передаем отсортированный массив и название конечного файла, куда помещаем массив.</p>
<p><b>readFileToList</b> - Получает на вход название файла, читает файл, пока есть строки в файле. Строки помещаем в ArrayList<String>. ArrayList с названием файла помещаем в Map. Возвращает Map<<String>(Файл), ArrayList<String>(Данные из файла)></p> 
<p><b>resultToFileInt</b> - Записываем в файл построчно содержимое отсортированного массива для целых чисел.</p> 
<p><b>resultToFileStr</b> - Записываем в файл построчно содержимое отсортированного массива для строк.</p> 
<p><b>sortMergeUpInt</b> - Метод для сортировки целых чисел по возрастанию. 
Для сортировки на вход получаем два массива с содержимым файлов. Создаем третий массив с длиной равной сумме длин переданных массивов.
В конце метода возвращаем этот массив.
В цикле проходим количество итераций, равное длине третьего массива.
Логика сортировки: начинаем отсчет с 0 у каждого массива. Если элемент первого массива меньше элемента второго массива с таким же индексом, то в третий массив ставим элемент из первого массива, иначе из второго.
Так заполняется третий массив, пока индекс первого или второго массива не станет равен длине первого или второго массива соответственно.
Тогда предпоследним элементом становится массив, у которого индекс стал равен длине массива первым.</p> 
<p><b>sortMergeDownInt</b> - Метод для сортировки целых чисел по убыванию. 
Для сортировки на вход получаем два массива с содержимым файлов. Создаем третий массив с длиной равной сумме длин переданных массивов.
В конце метода возвращаем этот массив.
"Переворачиваем" массив с помощью цикла.
Далее в цикле проходим количество итераций, равное длине третьего массива.
Логика сортировки: начинаем отсчет с 0 у каждого массива. Если элемент первого массива больше элемента второго массива с таким же индексом, то в третий массив ставим элемент из первого массива, иначе из второго.
Так заполняется третий массив, пока индекс первого или второго массива не станет равен длине первого или второго массива соответственно.
Тогда предпоследним элементом становится массив, у которого индекс стал равен длине массива первым.</p> 
<p><b>sortMergeUpStr</b> - Метод для сортировки строк по возрастанию. 
Для сортировки на вход получаем два массива с содержимым файлов. Создаем третий массив с длиной равной сумме длин переданных массивов.
В конце метода возвращаем этот массив.
В цикле проходим количество итераций, равное длине третьего массива.
Логика сортировки: начинаем отсчет с 0 у каждого массива. Если элемент первого массива меньше элемента второго массива с таким же индексом, то в третий массив ставим элемент из первого массива, иначе из второго.
Для сравнения используем метод compareTo().
Так заполняется третий массив, пока индекс первого или второго массива не станет равен длине первого или второго массива соответственно.
Тогда предпоследним элементом становится массив, у которого индекс стал равен длине массива первым.</p> 
<p><b>sortMergeDownStr</b> - Метод для сортировки строк по убыванию. 
Для сортировки на вход получаем два массива с содержимым файлов. Создаем третий массив с длиной равной сумме длин переданных массивов.
В конце метода возвращаем этот массив.
"Переворачиваем" массив с помощью цикла.
Далее в цикле проходим количество итераций, равное длине третьего массива.
Логика сортировки: начинаем отсчет с 0 у каждого массива. Если элемент первого массива больше элемента второго массива с таким же индексом, то в третий массив ставим элемент из первого массива, иначе из второго.
Для сравнения используем метод compareTo().
Так заполняется третий массив, пока индекс первого или второго массива не станет равен длине первого или второго массива соответственно.
Тогда предпоследним элементом становится массив, у которого индекс стал равен длине массива первым.</p>
<h2>Заключение:</h2>
<p>Сортировка слиянием файлов работает. Но решение еще не завершено, т.к. не поддерживает работы с большими файлами.
В решении есть к чему стремиться и в будущем я его доделаю.</p>
